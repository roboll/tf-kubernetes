kind: ConfigMap
apiVersion: v1
metadata:
  name: controller-manager-kubeconfig
  namespace: kube-system
data:
  kubeconfig.yaml: |
    kind: Config
    apiVersion: v1
    current-context: kubelet
    clusters:
      - name: kubernetes
        cluster:
          certificate-authority: /etc/secrets/kubelet.ca
          server: https://${KUBE_FQDN}
    users:
      - name: kubelet
        user:
          client-certificate: /etc/secrets/kubelet.crt
          client-key: /etc/secrets/kubelet.key
    contexts:
      - name: kubelet
        context:
          cluster: kubernetes
          user: kubelet
