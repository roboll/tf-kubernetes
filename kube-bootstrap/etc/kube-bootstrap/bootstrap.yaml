apiVersion: v1
kind: Pod
metadata:
  name: bootstrap
  namespace: kube-system
  labels:
    app: kube-bootstrap
spec:
  hostNetwork: true
  containers:
    - name: bootstrap
      image: quay.io/roboll/kube-bootstrap:alpha
      command:
        - /opt/bin/bootstrap.sh
      volumeMounts:
        - name: env
          mountPath: /etc/kube-bootstrap/env
          readOnly: true
        - name: manifests
          mountPath: /etc/kubernetes/manifests/
        - name: vault-secrets
          mountPath: /var/lib/vault/
  volumes:
    - name: env
      hostPath:
        path: /etc/kube-bootstrap/env
    - name: manifests
      hostPath:
        path: /etc/kubernetes/manifests/
    - name: vault-secrets
      hostPath:
        path: /var/lib/vault/
