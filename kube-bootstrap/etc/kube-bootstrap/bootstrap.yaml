apiVersion: v1
kind: Pod
metadata:
  name: controller-bootstrap
  namespace: kube-system
  labels:
    app: kubernetes
    component: controller-bootstrap
spec:
  hostNetwork: true
  containers:
    - name: bootstrap
      image: quay.io/roboll/kube-bootstrap:alpha
      imagePullPolicy: Always
      command:
        - /opt/bin/kube-bootstrap.sh
      env:
        - name: KUBE_FQDN
          value: ${KUBE_FQDN}
        - name: HYPERKUBE
          value: ${HYPERKUBE}
        - name: ETCD_INITIAL_CLUSTER
          value: ${ETCD_INITIAL_CLUSTER}
      volumeMounts:
        - name: manifests
          mountPath: /etc/kubernetes/manifests
        - name: env-vars
          mountPath: /etc/kube-bootstrap/env
  volumes:
    - name: manifests
      hostPath:
        path: /etc/kubernetes/manifests
    - name: env-vars
      hostPath:
        path: /etc/kubernetes/env
