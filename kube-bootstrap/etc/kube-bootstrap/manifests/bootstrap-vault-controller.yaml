apiVersion: v1
kind: Pod
metadata:
  name: bootstrap-vault-controller
  namespace: kube-system
  labels:
    app: bootstrap-kubernetes
    component: vault-controller
spec:
  hostNetwork: true
  containers:
    - name: vault-controller
      image: quay.io/roboll/kube-vault-controller:v0.3.0
      command:
        - /kube-vault-controller
        - --apiserver=http://localhost:8080
        - --sync-period=1m
      env:
        - name: VAULT_ADDR
          value: ${VAULT_ADDR}
        - name: VAULT_TOKEN
          valueFrom:
            secretKeyRef:
              name: vault-controller
              key: token
